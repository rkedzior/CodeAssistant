2025-12-28
- BL-0001 complete: Maven Spring Boot + Thymeleaf skeleton; `GET /` shows “Dashboard”; `GET /health` returns `{status: ok}`.
- Tests: `DashboardSmokeTest`, `HealthSmokeTest` via MockMvc with `@ActiveProfiles("test")` (run: `.\mvnw.cmd test`).
Observations / short memory:
- Chose Maven + Java 17 bytecode (runs on local JDK 21 OK).
- Package root: `app.platform` (per HLD).
- Mockito emits JDK dynamic-agent warning during tests; not addressed yet.

- BL-0101 complete: Project Setup UI (`GET/POST /setup`) with validation; config persisted to `./.codeassistant/config.json`; Dashboard shows “Configured”.
- Tests: `ProjectSetupFlowTest` (local setup, GitHub setup, invalid GitHub id) under `test` profile using in-memory config adapter.
Observations:
- Runtime config folder `.codeassistant/` is gitignored; file-backed adapter disabled in `test` profile.

- BL-0102 complete: vector-store state bootstrap via `metadata.json` with attributes `type=documentation`, `subtype=metadata`; `GET /api/metadata` added.
- UI: Dashboard shows “Last indexed commit: Not indexed” when empty.
- Tests: `MetadataApiTest` + updated `DashboardSmokeTest`.
Observations:
- Implemented a minimal local filesystem “vector store” under `.codeassistant/vectorstore/` for non-test profiles; tests use in-memory vector store.

- BL-0201 complete: Indexing page (`/index`) + initial index job; REST `POST /api/index/initial` + `GET /api/index/status`; metadata `lastIndexedCommit` updated from `git rev-parse HEAD`.
- Tests: `IndexingFlowTest` creates a temp git repo, starts job, asserts progress changes while RUNNING, and dashboard displays the commit hash.
Observations:
- Index job runner is in-memory/single-job (OK for MVP); uses Spring `applicationTaskExecutor`.

- BL-0202 complete: tracked-file enumeration via `git ls-files`; API `GET /api/index/tracked-files` added.
- Tests: `TrackedFilesApiTest` verifies ignored/untracked file is excluded.

- BL-0203 complete: initial index uploads classified tracked files to vector store with attributes (`type`, `subtype`, `path`); API `GET /api/vectorstore/files` added.
- Tests: extended `IndexingFlowTest` validates uploaded code (`business_logic`) and spec (`documentation/spec`) + `/api/metadata` lastIndexedCommit.
Observations:
- Vector-store fileId is `repo_<sha256(path)>` to keep IDs filesystem-safe; original path preserved in attributes.

- BL-0301 complete: exact text search via `TextSearchPort` + `RipgrepTextSearchAdapter` (`rg`-first, Java fallback); UI `/search`; API `GET /api/search/text`.
- Tests: `TextSearchApiTest` verifies tracked match returned and gitignored match excluded (forces Java fallback in `test` profile).

- BL-0302 complete: regex mode added to text search (`regex=true`); invalid regex returns 400 (API) and shows error banner (UI).
- Tests: extended `TextSearchApiTest` covers regex happy path (`foo\\s+bar`) and invalid regex (`foo(`).

- BL-0401 complete: semantic search mode added (UI `/search?mode=semantic` + API `GET /api/search/semantic?query=...&k=...`) returning ranked results.
- Tests: `SemanticSearchApiTest` covers ranking and HTML rendering under `test` profile.
Observations:
- MVP semantic search is local deterministic token-hash cosine scoring over vector-store file contents (no OpenAI/network); ready for BL-0402 filters via `filters` param.

- BL-0402 complete: semantic search supports attribute filters `type`/`subtype` (UI controls + API query params) to narrow results (e.g., `documentation/spec`).
- Tests: extended `SemanticSearchApiTest` validates filtered API/HTML returns only `/spec` Markdown when `type=documentation&subtype=spec`.

- BL-0501 complete: file viewer added (`GET /file?path=...`) showing file content plus current indexed commit; search results link to the viewer.
- Tests: `FileViewerFlowTest` verifies `/file` renders content + commit and `/search` includes `/file?path=...` link.
